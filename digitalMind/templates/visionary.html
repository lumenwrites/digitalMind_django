{% load cms_tags sekizai_tags menu_tags %}
<!DOCTYPE html>
<html>
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">    
    <title>Visionary</title>

     {% render_block "css" %}
    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="/static/css/visionary.css">    
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    
    <script src="/static/js/ckeditor/ckeditor.js" type="text/javascript"></script>
    
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.6.0.min.js"></script>
    
<script src="/static/js/script.js"></script>

  </head>
<body>

<div id="main">

	<header>

	</header>

	<div id="topMenu">
	  <nav>
	    <a href="#" id="logo"></a>
	    <ul>
	      <li><a href="http://digital-mind.co">DigitalMind</a></li>



	      <li style="float:right; margin-right:4px;">
	      <span>{{message}}</span>		
	      {% if signedin %}
	      <button id="saveStateButton">save</button>
	      <button id="loadStateButton">load</button>
<!--   	      <a href="/loadState/" class="button">load</a> -->
	      <span style="margin:0 20px;">click <a href="/logout/">here</a> to logout.</span>
	      {% else %}
		
	    <span id="gray" >To save changes </span>
		<span id="signup" >Signup</span>
		<span id="gray" > or </span>
		<span id="login">Login</span></li>
	      </ul>
	    
	    <section id="signupForm" class="widget login">
	      <form action="/signup/" method="post">{% csrf_token %}
		{{form}}
		<button class="button" type="submit">Sign Up</button>
		</form>
	    </section>

	    <section id="loginForm" class="widget login">
	      <form action="/login/" method="post">{% csrf_token %} 
		<p>Username:<input type="text" name="username"></p>
		<p>Password:<input type="password" name="password"></p>
		<button class="button" type="submit">Login</button>
		</form>
	      </section>
	    {% endif %}
	    </nav>

	  </div>

	
	<div id="left">
		<div id="leftMenu">
			<p>..</p>
			<p><div class="toolButton" id="createTextNode">+</div></p>
		</div>
		<div id="container">
			<canvas>
			</canvas>
		</div>
	</div>
	
	<div id="right">
		<div id="rightTop">		
			<!--rightTop-->
			<div id="text">
					<textarea id="editor1"></textarea>
			</div>
		</div>
		<div id="rightBottom">
			<div id="rightBottomLeft">
					<div id="tree1"></div>
			</div>
			<div id="rightBottomRight">

				<div id="parameters">
					<form>
						<input id="nodeTitle" type="text"/>
						<textarea id="content"></textarea>
					</form>
				</div>			
			</div>
		</div>	
	</div>
	

	

	
	
	<footer>
	
	
	</footer>

</div>

<script type="text/javascript">
    CKEDITOR.replace( 'editor1', {

    } );
</script>


<script src="/static/js/tree.jquery.js"></script>
<link rel="stylesheet" href="/static/css/jqtree.css">
<script>
var data = [
	{    
		id: 1000,
		label: 'toplevel',
		name: 'toplevel',
        children: [	
        	]
    }

];
$(function() {
    $('#tree1').tree({
        data: data,
        autoOpen: true,
        dragAndDrop: true,
    });
});

</script>
<script>

</script>


<script src="/static/js/nodes.js"></script>

<script>
stage.add(layer);
</script>

<script>




</script>






<script>
var toParse='{{state|safe}}';
var parse = JSON.parse('{{state|safe}}')
var nodeList;
function loadState(){
// $('#tree1').tree('loadData', treeData, toplevel);
	length = parse.length;
	nodesToCreate=parse;
	nodeList = [];
	for(var i = 0; i < length; i++){
			var toCreate = new createTextNode(nodesToCreate[i].posX,nodesToCreate[i].posY, nodesToCreate[i].title, nodesToCreate[i].content);
			console.log(toCreate); console.log(nodeList);
};
}
$("#loadStateButton").on('click', function(){
	console.log(loadState());
});

</script>
          {% render_block "js" %}
</body>

</html>
